(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{132:function(t,e,r){},176:function(t,e,r){t.exports=r(215)},183:function(t,e,r){},188:function(t,e,r){var n={"./image1.jpg":[229,6],"./image2.jpeg":[230,7],"./image3.jpeg":[231,8],"./image4.jpg":[232,9],"./image5.jpg":[233,10],"./image6.jpeg":[234,11],"./image7.jpeg":[235,12],"./image8.jpeg":[236,13],"./image9.jpeg":[237,14]};function a(t){var e=n[t];return e?r.e(e[1]).then(function(){var t=e[0];return r.t(t,7)}):Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}a.keys=function(){return Object.keys(n)},a.id=188,t.exports=a},189:function(t,e,r){},190:function(t,e,r){},215:function(t,e,r){"use strict";r.r(e);var n=r(0),a=r.n(n),o=r(37),i=r.n(o),c=(r(183),r(16)),l=r(20),u=r(3),s=r(34),f=r(8),h=r(309),p=r(315),d=r(304),m=r(318),v=r(305),y=r(302),g=r(306),b=r(311),w=function(t){var e=t.filters,r=t.onFilterChange,n=t.onSearch;return a.a.createElement(h.a,{style:{padding:"1rem",margin:"1rem 0"}},a.a.createElement(p.a,{display:"flex",justifyContent:"space-between",flexWrap:"nowrap"},a.a.createElement(d.a,{label:"Search by title",variant:"outlined",value:e.title||"",onChange:function(t){return r("title",t.target.value)},style:{flex:1,marginRight:"1rem"}}),a.a.createElement(d.a,{label:"Search by author",variant:"outlined",value:e.author||"",onChange:function(t){return r("author",t.target.value)},style:{flex:1,marginRight:"1rem"}}),a.a.createElement(m.a,{variant:"outlined",style:{flex:1,marginRight:"1rem"}},a.a.createElement(v.a,null,"Filter by rating"),a.a.createElement(y.a,{value:e.rating||"",onChange:function(t){return r("rating",t.target.value)},label:"Filter by rating"},a.a.createElement(g.a,{value:""},a.a.createElement("em",null,"None")),a.a.createElement(g.a,{value:1},"1 Star"),a.a.createElement(g.a,{value:2},"2 Stars"),a.a.createElement(g.a,{value:3},"3 Stars"),a.a.createElement(g.a,{value:4},"4 Stars"),a.a.createElement(g.a,{value:5},"5 Stars"))),a.a.createElement(d.a,{label:"Min Price",variant:"outlined",type:"number",value:e.minPrice||"",onChange:function(t){return r("minPrice",t.target.value)},style:{flex:1,marginRight:"1rem"}}),a.a.createElement(d.a,{label:"Max Price",variant:"outlined",type:"number",value:e.maxPrice||"",onChange:function(t){return r("maxPrice",t.target.value)},style:{flex:1,marginRight:"1rem"}}),a.a.createElement(b.a,{onClick:n,style:{fontWeight:"bold"}},"Search")))},E=r(86),x=r(312),j=r(319),L=r(320),O=r(321),k=r(322),S=r(143),_=r.n(S),N=r(100),C=r.n(N);var P=function(t){var e=t.book,o=t.onAddToCart,i=t.index,c=void 0===i?0:i,l=Object(n.useState)(null),u=Object(f.a)(l,2),s=u[0],h=u[1];function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;return t.length<=e?t:t.slice(0,e)+"..."}Object(n.useEffect)(function(){var t=c%10+1,e=function(e){return r(188)("./image".concat(t,".").concat(e)).then(function(t){return h(t.default),console.log("Image loaded:",t.default),!0}).catch(function(t){return console.log("Failed to load image with error:",t),!1})};e("jpg").then(function(t){t||e("jpeg")})},[c]);return console.log("evenBooks",c),a.a.createElement(x.a,{container:!0,spacing:4},a.a.createElement(x.a,{item:!0,xs:12,sm:12,md:4,lg:6,xl:8},a.a.createElement(j.a,{style:{position:"relative"}},c%4===0&&a.a.createElement(function(){return a.a.createElement("div",{style:{position:"absolute",backgroundColor:"red",color:"white",padding:"4px 8px",top:0,right:0,zIndex:10}},"Offer")},null),s&&a.a.createElement(L.a,{component:"img",alt:e.title,height:"140",style:{objectFit:"contain"},image:s}),a.a.createElement(O.a,null,a.a.createElement(k.a,{variant:"h5",component:"div"},p(e.title,10)),a.a.createElement(k.a,{variant:"subtitle1",color:"text.secondary"},p(e.author,10)),a.a.createElement(k.a,{variant:"body2"}," ",p(e.description,10)),a.a.createElement(k.a,{variant:"body2"},"Price: $",e.price),a.a.createElement(k.a,{variant:"body2",style:{display:"flex",alignItems:"center"}},"Rating: ",e.rating,Array.from({length:e.rating}).map(function(t,e){return a.a.createElement(_.a,{key:e,style:{color:"goldenrod",marginLeft:"4px"}})})),a.a.createElement(b.a,{startIcon:a.a.createElement(C.a,null),onClick:function(){return o(e)},variant:"contained",color:"primary",style:{marginTop:"8px"}},"Add to Cart")))))},T=r(298),I=(r(189),r(144)),F=r.n(I),G=r(145),A=r.n(G);r(190);function B(){B=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(S){l=function(t,e,r){return t[e]=r}}function u(t,e,r,a){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),c=new O(a||[]);return n(i,"_invoke",{value:E(t,r,c)}),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(S){return{type:"throw",arg:S}}}t.wrap=u;var f={};function h(){}function p(){}function d(){}var m={};l(m,o,function(){return this});var v=Object.getPrototypeOf,y=v&&v(v(k([])));y&&y!==e&&r.call(y,o)&&(m=y);var g=d.prototype=h.prototype=Object.create(m);function b(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function w(t,e){var a;n(this,"_invoke",{value:function(n,o){function i(){return new e(function(a,i){!function n(a,o,i,c){var l=s(t[a],t,o);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then(function(t){n("next",t,i,c)},function(t){n("throw",t,i,c)}):e.resolve(f).then(function(t){u.value=t,i(u)},function(t){return n("throw",t,i,c)})}c(l.arg)}(n,o,a,i)})}return a=a?a.then(i,i):i()}})}function E(t,e,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return{value:void 0,done:!0}}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=x(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function x(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var a=s(n,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,f;var o=a.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function k(t){if(t||""===t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}throw new TypeError(typeof t+" is not iterable")}return p.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:p,configurable:!0}),p.displayName=l(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,l(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),l(w.prototype,i,function(){return this}),t.AsyncIterator=w,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new w(u(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then(function(t){return t.done?t.value:i.next()})},b(g),l(g,c,"Generator"),l(g,o,function(){return this}),l(g,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;L(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}var D=function(t){var e,r=t.onAddToCart,o=(t.book,Object(n.useState)([])),i=Object(f.a)(o,2),c=i[0],s=i[1],h=Object(n.useState)(0),p=Object(f.a)(h,2),d=p[0],m=p[1],v=function(){var t=Object(l.a)(B().mark(function t(){var e;return B().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return localStorage.getItem("jwtToken"),t.prev=1,t.next=4,T.a.post("http://localhost:3000/books/filter",{rating:"4"});case 4:e=t.sent,s(e.data),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error("Error fetching 4 star books:",t.t0);case 11:case"end":return t.stop()}},t,null,[[1,8]])}));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)(function(){v()},[]),a.a.createElement("div",{style:{display:"flex",alignItems:"center",width:"100%",overflow:"hidden"}},a.a.createElement(b.a,{variant:"outlined",onClick:function(){m(function(t){return Math.max(t-1,0)})},disabled:0===d,style:{marginRight:"1rem",flexShrink:0}},a.a.createElement(F.a,null)),a.a.createElement("div",{style:{display:"flex",width:"calc(100% - 100px)",justifyContent:"space-between",overflowX:"hidden",padding:"2px"}},c.slice(d,d+4).map(function(t,e){return a.a.createElement("div",{style:{flex:"1",flexShrink:0,padding:"0",margin:"0 5px"}},a.a.createElement(P,{book:t,index:e,onAddToCart:r,key:t.id}))})),a.a.createElement(b.a,{variant:"outlined",onClick:function(){m(function(t){return Math.min(t+1,c.length-4)})},disabled:d>=c.length-4,style:(e={marginLeft:"1rem"},Object(u.a)(e,"marginLeft","1rem"),Object(u.a)(e,"flexShrink",0),e)},a.a.createElement(A.a,null)))},q=r(300);function W(){W=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(S){l=function(t,e,r){return t[e]=r}}function u(t,e,r,a){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),c=new O(a||[]);return n(i,"_invoke",{value:E(t,r,c)}),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(S){return{type:"throw",arg:S}}}t.wrap=u;var f={};function h(){}function p(){}function d(){}var m={};l(m,o,function(){return this});var v=Object.getPrototypeOf,y=v&&v(v(k([])));y&&y!==e&&r.call(y,o)&&(m=y);var g=d.prototype=h.prototype=Object.create(m);function b(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function w(t,e){var a;n(this,"_invoke",{value:function(n,o){function i(){return new e(function(a,i){!function n(a,o,i,c){var l=s(t[a],t,o);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then(function(t){n("next",t,i,c)},function(t){n("throw",t,i,c)}):e.resolve(f).then(function(t){u.value=t,i(u)},function(t){return n("throw",t,i,c)})}c(l.arg)}(n,o,a,i)})}return a=a?a.then(i,i):i()}})}function E(t,e,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return{value:void 0,done:!0}}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=x(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function x(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var a=s(n,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,f;var o=a.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function k(t){if(t||""===t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}throw new TypeError(typeof t+" is not iterable")}return p.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:p,configurable:!0}),p.displayName=l(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,l(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),l(w.prototype,i,function(){return this}),t.AsyncIterator=w,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new w(u(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then(function(t){return t.done?t.value:i.next()})},b(g),l(g,c,"Generator"),l(g,o,function(){return this}),l(g,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;L(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}var R="http://localhost:3000",Y=function(){var t=Object(l.a)(W().mark(function t(e,r,n){var a,o;return W().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={headers:{Authorization:"Bearer ".concat(n)}},t.prev=1,t.next=4,T.a.post("".concat(R,"/books/booklist"),{page:e,pageSize:r},a);case 4:return o=t.sent,t.abrupt("return",o.data);case 8:throw t.prev=8,t.t0=t.catch(1),console.error("Error fetching books:",t.t0),t.t0;case 12:case"end":return t.stop()}},t,null,[[1,8]])}));return function(e,r,n){return t.apply(this,arguments)}}(),z=function(t){var e="".concat(R,"/books/filter"),r={title:t.title,author:t.author,rating:t.rating,minPrice:t.minPrice,maxPrice:t.maxPrice};return Object.keys(r).forEach(function(t){return(null==r[t]||""===r[t])&&delete r[t]}),T.a.post(e,r)},M=function(t){var e="".concat(R,"/auth/signup");return T.a.post(e,t)},U=function(t){var e="".concat(R,"/auth/login");return T.a.post(e,t)},$=function(){var t=Object(l.a)(W().mark(function t(e,r,n){var a,o,i,c;return W().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",null);case 2:return(a=new FormData).append("file",e),o="".concat(R,"/books/import?targetDb=").concat(r,"&targetCollection=").concat(n),i=localStorage.getItem("jwtToken"),t.prev=6,t.next=9,T.a.post(o,a,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(i)}});case 9:return c=t.sent,t.abrupt("return",c.data);case 13:throw t.prev=13,t.t0=t.catch(6),t.t0;case 16:case"end":return t.stop()}},t,null,[[6,13]])}));return function(e,r,n){return t.apply(this,arguments)}}(),H=function(){var t=Object(l.a)(W().mark(function t(e){var r,n,a,o;return W().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r="".concat(R,"/books/dump/").concat(e),n=localStorage.getItem("jwtToken"),a={headers:{Authorization:"Bearer ".concat(n)},responseType:"blob"},t.prev=3,t.next=6,T.a.get(r,a);case 6:return o=t.sent,t.abrupt("return",o);case 10:throw t.prev=10,t.t0=t.catch(3),t.t0;case 13:case"end":return t.stop()}},t,null,[[3,10]])}));return function(e){return t.apply(this,arguments)}}();function Q(){Q=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(S){l=function(t,e,r){return t[e]=r}}function u(t,e,r,a){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),c=new O(a||[]);return n(i,"_invoke",{value:E(t,r,c)}),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(S){return{type:"throw",arg:S}}}t.wrap=u;var f={};function h(){}function p(){}function d(){}var m={};l(m,o,function(){return this});var v=Object.getPrototypeOf,y=v&&v(v(k([])));y&&y!==e&&r.call(y,o)&&(m=y);var g=d.prototype=h.prototype=Object.create(m);function b(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function w(t,e){var a;n(this,"_invoke",{value:function(n,o){function i(){return new e(function(a,i){!function n(a,o,i,c){var l=s(t[a],t,o);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then(function(t){n("next",t,i,c)},function(t){n("throw",t,i,c)}):e.resolve(f).then(function(t){u.value=t,i(u)},function(t){return n("throw",t,i,c)})}c(l.arg)}(n,o,a,i)})}return a=a?a.then(i,i):i()}})}function E(t,e,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return{value:void 0,done:!0}}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=x(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function x(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var a=s(n,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,f;var o=a.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function k(t){if(t||""===t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}throw new TypeError(typeof t+" is not iterable")}return p.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:p,configurable:!0}),p.displayName=l(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,l(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),l(w.prototype,i,function(){return this}),t.AsyncIterator=w,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new w(u(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then(function(t){return t.done?t.value:i.next()})},b(g),l(g,c,"Generator"),l(g,o,function(){return this}),l(g,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;L(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}var V=function(t){var e=t.searchTerm,r=void 0===e?{}:e,o=t.hasSearched,i=t.onAddToCart,c=t.books,u=Object(n.useState)(1),s=Object(f.a)(u,2),h=s[0],d=s[1],m=Object(n.useState)(5),v=Object(f.a)(m,1)[0],y=function(){var t=Object(l.a)(Q().mark(function t(e){return Q().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=4;break}return t.next=3,y(e);case 3:t.sent;case 4:return t.abrupt("return",c);case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),g=Object(E.useQuery)(["books",c],function(){return y(c)},{enabled:!c.length||o}),b=g.data,w=void 0===b?[]:b,j=g.isError;return g.isLoading?a.a.createElement("div",null,"Loading..."):j?a.a.createElement("div",null,"Error loading books."):a.a.createElement(p.a,{p:2}," ",a.a.createElement(p.a,{mb:3}," ",a.a.createElement(D,{books:c,onAddToCart:i})),Object.values(r).some(Boolean)?a.a.createElement(k.a,{variant:"h6",gutterBottom:!0},"Showing filtered results"):a.a.createElement(k.a,{variant:"h6",gutterBottom:!0},"Showing all books"),a.a.createElement(x.a,{container:!0,spacing:2},w.map(function(t,e){return a.a.createElement(x.a,{item:!0,xs:12,sm:6,md:4,key:t.id},a.a.createElement(P,{key:t.id,index:e,book:t,onAddToCart:i}))}))," ",a.a.createElement(p.a,{my:2,display:"flex",justifyContent:"center"},a.a.createElement(q.a,{count:Math.ceil(w.length/v),page:h,onChange:function(t,e){d(e)}})))},J=r(323),X=r(324),Z=r(325),K=r(326),tt=r(313),et=r(295),rt=r(54),nt=r(11),at=r(146),ot=r.n(at),it=Object(rt.atom)([]),ct=function(t){var e=t.cartItems,r=t.onRemoveFromCart,n=Object(nt.p)(),o=Object(rt.useAtom)(it),i=Object(f.a)(o,2),c=(i[0],i[1]);a.a.useEffect(function(){var t=e.reduce(function(t,e){var r=t.find(function(t){return t.title===e.title});return r?(r.quantity+=e.quantity,r.total+=e.price*e.quantity):t.push(Object(s.a)({},e,{total:e.price*e.quantity})),t},[]);c(t)},[e,c]);var l=e.reduce(function(t,e){return t+e.price*e.quantity},0);return a.a.createElement(h.a,{style:{margin:"2rem 1rem 1rem 1rem",padding:"1rem"}},0===l?a.a.createElement(k.a,{variant:"h5",color:"textSecondary",align:"center"},"Your cart is empty, please add items"):a.a.createElement("div",null,a.a.createElement(J.a,null,a.a.createElement(X.a,null,e.map(function(t){return a.a.createElement(Z.a,{key:t._id},a.a.createElement(K.a,null,a.a.createElement(tt.a,{src:t.image,alt:t.title,variant:"rounded"})),a.a.createElement(K.a,null,a.a.createElement(k.a,{variant:"h6"},t.title),a.a.createElement(k.a,{variant:"body2"},t.description)),a.a.createElement(K.a,{align:"right"},a.a.createElement(k.a,{variant:"body2"},"Price: $",t.price),a.a.createElement(k.a,{variant:"body2"},"Quantity: ",t.quantity),a.a.createElement(k.a,{variant:"body2"},"Total: $",t.total)),a.a.createElement(K.a,{align:"right"},a.a.createElement(b.a,{variant:"outlined",color:"secondary",startIcon:a.a.createElement(ot.a,null),onClick:function(){return r(t)},size:"small"},"Remove")))}))),a.a.createElement(et.a,{style:{margin:"1rem 0"}}),a.a.createElement(k.a,{variant:"h6",align:"right"},"Grand Total: $",l.toFixed(2)),a.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",gap:"1rem",marginTop:"1rem"}},a.a.createElement(b.a,{variant:"outlined",onClick:function(){return n("/")},size:"large"},"Continue Shopping"),a.a.createElement(b.a,{variant:"contained",color:"primary",onClick:function(){n("/checkout")},disabled:0===l,size:"large"},"Proceed to Checkout"))))},lt=(r(132),r(314));function ut(){ut=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(S){l=function(t,e,r){return t[e]=r}}function u(t,e,r,a){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),c=new O(a||[]);return n(i,"_invoke",{value:E(t,r,c)}),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(S){return{type:"throw",arg:S}}}t.wrap=u;var f={};function h(){}function p(){}function d(){}var m={};l(m,o,function(){return this});var v=Object.getPrototypeOf,y=v&&v(v(k([])));y&&y!==e&&r.call(y,o)&&(m=y);var g=d.prototype=h.prototype=Object.create(m);function b(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function w(t,e){var a;n(this,"_invoke",{value:function(n,o){function i(){return new e(function(a,i){!function n(a,o,i,c){var l=s(t[a],t,o);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then(function(t){n("next",t,i,c)},function(t){n("throw",t,i,c)}):e.resolve(f).then(function(t){u.value=t,i(u)},function(t){return n("throw",t,i,c)})}c(l.arg)}(n,o,a,i)})}return a=a?a.then(i,i):i()}})}function E(t,e,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return{value:void 0,done:!0}}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=x(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function x(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var a=s(n,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,f;var o=a.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function k(t){if(t||""===t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}throw new TypeError(typeof t+" is not iterable")}return p.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:p,configurable:!0}),p.displayName=l(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,l(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),l(w.prototype,i,function(){return this}),t.AsyncIterator=w,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new w(u(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then(function(t){return t.done?t.value:i.next()})},b(g),l(g,c,"Generator"),l(g,o,function(){return this}),l(g,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;L(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}var st=function(){var t=Object(nt.p)(),e=Object(n.useState)({username:"",password:""}),r=Object(f.a)(e,2),o=r[0],i=r[1],c=function(t){var e=t.target,r=e.name,n=e.value;i(function(t){return Object(s.a)({},t,Object(u.a)({},r,n))})},p=function(){var e=Object(l.a)(ut().mark(function e(){return ut().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t("/signup");case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(l.a)(ut().mark(function e(){var r,n,a,i,c;return ut().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U(o);case 3:r=e.sent,n=r.data,a=n.access_token,i=n.role,c=n.user,a&&(localStorage.setItem("jwtToken",a),localStorage.setItem("username",c),localStorage.setItem("role",i),t("admin"===i?"/admin":"/")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0.response;case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(){return e.apply(this,arguments)}}();return a.a.createElement(lt.a,{component:"main",maxWidth:"xl"},a.a.createElement(x.a,{container:!0,alignItems:"center",justifyContent:"center",className:"container-grid"},a.a.createElement(x.a,{item:!0,xs:12,sm:8,md:5},a.a.createElement(h.a,{elevation:3,className:"login-paper"},a.a.createElement(k.a,{component:"h1",variant:"h5",className:"login-title"},"BookStore Sign-In"),a.a.createElement("form",{noValidate:!0,className:"form-container"},a.a.createElement(d.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Email",name:"username",autoComplete:"username",autoFocus:!0,value:o.username,onChange:c,"data-testid":"usernameInput"}),a.a.createElement(d.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:o.password,onChange:c,"data-testid":"passwordInput"}),a.a.createElement(b.a,{fullWidth:!0,variant:"contained",color:"primary",className:"login-button",onClick:m,"data-testid":"loginButton"},"Sign-In"),a.a.createElement(k.a,{variant:"body2",className:"terms-text "},"By continuing, you agree to BookStore's"," ",a.a.createElement("a",{href:"#"},"Conditions of Use")," and"," ",a.a.createElement("a",{href:"#"},"Privacy Notice"),"."),a.a.createElement(et.a,null),a.a.createElement(b.a,{fullWidth:!0,variant:"text",className:"create-account-button",onClick:p,"data-testid":"signUpButton"},"Create your Book Store account"))))))},ft=r(327),ht=r(51),pt=r.n(ht),dt=r(147),mt=r.n(dt);function vt(){vt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(S){l=function(t,e,r){return t[e]=r}}function u(t,e,r,a){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),c=new O(a||[]);return n(i,"_invoke",{value:E(t,r,c)}),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(S){return{type:"throw",arg:S}}}t.wrap=u;var f={};function h(){}function p(){}function d(){}var m={};l(m,o,function(){return this});var v=Object.getPrototypeOf,y=v&&v(v(k([])));y&&y!==e&&r.call(y,o)&&(m=y);var g=d.prototype=h.prototype=Object.create(m);function b(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function w(t,e){var a;n(this,"_invoke",{value:function(n,o){function i(){return new e(function(a,i){!function n(a,o,i,c){var l=s(t[a],t,o);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then(function(t){n("next",t,i,c)},function(t){n("throw",t,i,c)}):e.resolve(f).then(function(t){u.value=t,i(u)},function(t){return n("throw",t,i,c)})}c(l.arg)}(n,o,a,i)})}return a=a?a.then(i,i):i()}})}function E(t,e,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return{value:void 0,done:!0}}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=x(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function x(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var a=s(n,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,f;var o=a.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function k(t){if(t||""===t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}throw new TypeError(typeof t+" is not iterable")}return p.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:p,configurable:!0}),p.displayName=l(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,l(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),l(w.prototype,i,function(){return this}),t.AsyncIterator=w,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new w(u(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then(function(t){return t.done?t.value:i.next()})},b(g),l(g,c,"Generator"),l(g,o,function(){return this}),l(g,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;L(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}var yt=function(){var t=Object(n.useState)({username:"",password:"",email:"",mobileNo:""}),e=Object(f.a)(t,2),r=e[0],o=e[1],i=Object.values(r).every(function(t){return""!==t.trim()}),c=Object(nt.p)(),p=function(t){var e=t.target,r=e.name,n=e.value;o(function(t){return Object(s.a)({},t,Object(u.a)({},r,n))})},m=function(){var t=Object(l.a)(vt().mark(function t(){var e;return vt().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M(r);case 3:e=t.sent,console.log(":::::",e),e.data&&(c("/login"),pt.a.fire("Success!","success")),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("Error during registration:",t.t0),t.t0.response&&pt.a.fire("Error",t.t0.response.data.message||"Error during registration.","error");case 12:case"end":return t.stop()}},t,null,[[0,8]])}));return function(){return t.apply(this,arguments)}}();return a.a.createElement(lt.a,{component:"main",maxWidth:"sm"},a.a.createElement(x.a,{container:!0,alignItems:"center",justify:"center",style:{minHeight:"100vh"}},a.a.createElement(x.a,{item:!0},a.a.createElement(h.a,{style:{padding:"2rem",display:"flex",flexDirection:"column",alignItems:"center",border:"1px solid #ddd"}},a.a.createElement("img",{width:"100",style:{marginBottom:"1rem"}}),a.a.createElement(k.a,{component:"h1",variant:"h5"},"Create account"),a.a.createElement("form",{noValidate:!0,style:{width:"100%",marginTop:"1rem"}},a.a.createElement(d.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Your name",name:"username",autoComplete:"name",value:r.username,onChange:p,"data-testid":"usernameInput"}),a.a.createElement(d.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"email",label:"Email",type:"email",id:"email",autoComplete:"email",value:r.email,onChange:p,"data-testid":"emailInput"}),a.a.createElement(d.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:r.password,onChange:p,"data-testid":"passwordInput",InputProps:{startAdornment:a.a.createElement(ft.a,{position:"start"},a.a.createElement(mt.a,null))}}),a.a.createElement(d.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"mobileNo",label:"Enter Mobile Number",id:"mobileNo",value:r.mobileNo,onChange:p,"data-testid":"mobileNumberInput"}),a.a.createElement(b.a,{fullWidth:!0,variant:"contained",color:"primary",style:{margin:"1rem 0",border:"1px solid #a88734",color:"white"},disabled:!i,onClick:m,"data-testid":"createaccountButton"},"Create your BookStore account"),a.a.createElement(k.a,{variant:"body2",align:"center"},"By creating an account, you agree to BookStore's"," ",a.a.createElement("a",{href:"#"},"Conditions of Use")," and"," ",a.a.createElement("a",{href:"#"},"Privacy Notice"),"."),a.a.createElement(et.a,{style:{margin:"20px 0"}}),a.a.createElement(k.a,{variant:"body2",align:"center"},"Already have an account?"),a.a.createElement(b.a,{fullWidth:!0,variant:"text",style:{marginTop:"10px"},onClick:function(){return c("/login")},"data-testid":"signButton"},"Sign-In"))))))},gt=r(116),bt=r.n(gt),wt=r(148),Et=r(299),xt=(r(213),r(328)),jt=r(151),Lt=r.n(jt),Ot=r(150),kt=r.n(Ot),St=Object(Et.a)(function(t){return{title:{fontFamily:"Roboto, sans-serif",fontWeight:500,marginBottom:t.spacing(2),color:t.palette.primary.main},sectionTitle:{fontFamily:"Roboto, sans-serif",fontWeight:400,marginBottom:t.spacing(1.5),color:t.palette.text.primary},contentText:{fontFamily:"Roboto, sans-serif",fontWeight:300,marginBottom:t.spacing(1),color:t.palette.text.secondary},totalAmount:{marginTop:t.spacing(2.5),fontFamily:"Roboto, sans-serif",fontWeight:500},button:{marginTop:t.spacing(3),display:"block",marginLeft:"auto",marginRight:"auto"}}});var _t=function(t){t.cartItems;var e=t.setCartItems,r=(St(),Object(n.useState)(!1)),o=Object(f.a)(r,2),i=o[0],c=o[1],l=Object(n.useState)(""),p=Object(f.a)(l,2),m=(p[0],p[1],Object(n.useState)(!1)),v=Object(f.a)(m,2),y=v[0],g=v[1],w=Object(n.useRef)(null),E=Object(n.useState)(""),x=Object(f.a)(E,2),j=x[0],L=x[1],O=Object(n.useState)(""),S=Object(f.a)(O,2),_=S[0],N=S[1],C=Object(n.useState)(""),P=Object(f.a)(C,2),T=P[0],I=P[1],F=Object(rt.useAtom)(it),G=Object(f.a)(F,2),A=G[0],B=(G[1],Object(n.useState)({cardNumber:"",expiryDate:"",cvv:"",cardholderName:""})),D=Object(f.a)(B,2),q=D[0],W=D[1],R=Object(n.useState)({}),Y=Object(f.a)(R,2),z=(Y[0],Y[1],function(t){var e=t.target,r=e.name,n=e.value;W(function(t){return Object(s.a)({},t,Object(u.a)({},r,n))})});console.log("isPaymentSuccessful",y);var M=A.reduce(function(t,e){return t+e.price*e.quantity},0);return console.log("totalAmount",A),a.a.createElement("div",{className:"payment-container"},y?a.a.createElement("div",{ref:w,className:"receipt-container"},a.a.createElement(h.a,{elevation:3,className:"paper-container"},a.a.createElement(k.a,{variant:"h5",align:"center",className:"title"},a.a.createElement("strong",null," Bookstore Payment Receipt")),a.a.createElement(et.a,{className:"divider-margin"}),a.a.createElement(k.a,{variant:"h6",style:{color:"#131921",marginBottom:"10px"}},a.a.createElement("strong",null," Purchased Items:")),A.map(function(t){return a.a.createElement("div",{key:t._id,style:{marginBottom:"10px"}},a.a.createElement(k.a,{variant:"body1"},a.a.createElement("strong",null,t.title," - $",t.price," x ",t.quantity," = $",(t.price*t.quantity).toFixed(2))))}),a.a.createElement(et.a,{style:{margin:"15px 0"}}),a.a.createElement(k.a,{variant:"body1"},a.a.createElement("strong",null," Card Holder: ",T)),a.a.createElement(k.a,{variant:"body1"},a.a.createElement("strong",null," ","Card Number: **** **** **** ",j.slice(-4))),a.a.createElement(k.a,{variant:"body1"}," ",a.a.createElement("strong",null,"Expiry Date: ")," ",_),a.a.createElement(k.a,{variant:"body1"},a.a.createElement("strong",null," Time & Date: ",(new Date).toLocaleString())),a.a.createElement(k.a,{variant:"h6",style:{color:"#131921",marginTop:"15px"}},a.a.createElement("strong",null," Shipping Details: ")),a.a.createElement(k.a,{variant:"body1"},a.a.createElement("strong",null," Address: Mock Address, 123 St")),a.a.createElement(k.a,{variant:"body1"},a.a.createElement("strong",null," Mobile: 123-456-7890")," "),a.a.createElement(k.a,{variant:"body1"},a.a.createElement("strong",null," Expected Time of Delivery: 2-4 PM")),a.a.createElement(k.a,{variant:"h6",style:{color:"#131921",marginTop:"15px"}},a.a.createElement("strong",null," Total Amount: $",M.toFixed(2))),a.a.createElement("div",{style:{marginTop:"20px",textAlign:"center"}},a.a.createElement(b.a,{id:"downloadButton",variant:"contained",color:"primary",className:"center-buttons",onClick:function(){var t=document.getElementById("downloadButton");t.style.display="none",bt()(w.current).then(function(e){var r=new wt.a,n=r.internal.pageSize.getWidth(),a=.8*n,o=e.height*a/e.width,i=(n-a)/2,c=(r.internal.pageSize.getHeight()-o)/4+1;r.addImage(e.toDataURL("image/png"),"PNG",i,c,a,o);for(var l=r.internal.getNumberOfPages(),u=1;u<=l;u++)r.setPage(u),r.setTextColor(235),r.setFontSize(40),r.text("Bookstore Name",n/2,r.internal.pageSize.getHeight()/2,{angle:45,align:"center"});r.save("payment-slip.pdf"),t.style.display="block"})}},"Download as PDF")))):a.a.createElement(a.a.Fragment,null,a.a.createElement("form",{onSubmit:function(){console.log("testssss",q),console.log("test",q),L(q.cardNumber),N(q.expiryDate),I(q.cardholderName),g(!0),e([]),console.log("groupedItems",A)}},a.a.createElement(d.a,{required:!0,name:"cardNumber",label:"Card Number",variant:"outlined",fullWidth:!0,value:q.cardNumber,onChange:function(t){var e=t.target.value.replace(/\D/g,"");e.length>16&&(e=e.substring(0,16));for(var r="",n=0;n<e.length;n++)n>0&&n%4===0&&(r+="-"),r+=e[n];W(function(t){return Object(s.a)({},t,{cardNumber:r})})},style:{marginBottom:"10px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}}),a.a.createElement(d.a,{required:!0,name:"expiryDate",label:"Expiry Date",variant:"outlined",fullWidth:!0,style:{marginBottom:"10px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},value:q.expiryDate,onChange:function(t){var e=t.target.value.replace(/\D/g,"");e.length>4&&(e=e.substring(0,4));var r=e;e.length>2&&(r=e.substring(0,2)+"/"+e.substring(2)),W(function(t){return Object(s.a)({},t,{expiryDate:r})})}}),a.a.createElement(d.a,{required:!0,name:"cvv",type:i?"text":"password",label:"CVV",variant:"outlined",fullWidth:!0,style:{marginBottom:"0px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},value:q.cvv,onChange:z,InputProps:{endAdornment:a.a.createElement(xt.a,{onClick:function(){return c(!i)}},i?a.a.createElement(kt.a,null):a.a.createElement(Lt.a,null))}}),a.a.createElement(d.a,{required:!0,name:"cardholderName",variant:"outlined",margin:"normal",fullWidth:!0,label:"Cardholder Name",type:"text",style:{marginBottom:"10px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},value:q.cardholderName,onChange:z,inputProps:{pattern:"^[A-Za-z ]+$",title:"Cardholder name should only contain alphabets and spaces."}}),a.a.createElement(b.a,{type:"submit",fullWidth:!0,variant:"contained",className:"confirm-button"},"Confirm Payment"))))},Nt=r(303);function Ct(){Ct=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(S){l=function(t,e,r){return t[e]=r}}function u(t,e,r,a){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),c=new O(a||[]);return n(i,"_invoke",{value:E(t,r,c)}),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(S){return{type:"throw",arg:S}}}t.wrap=u;var f={};function h(){}function p(){}function d(){}var m={};l(m,o,function(){return this});var v=Object.getPrototypeOf,y=v&&v(v(k([])));y&&y!==e&&r.call(y,o)&&(m=y);var g=d.prototype=h.prototype=Object.create(m);function b(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function w(t,e){var a;n(this,"_invoke",{value:function(n,o){function i(){return new e(function(a,i){!function n(a,o,i,c){var l=s(t[a],t,o);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then(function(t){n("next",t,i,c)},function(t){n("throw",t,i,c)}):e.resolve(f).then(function(t){u.value=t,i(u)},function(t){return n("throw",t,i,c)})}c(l.arg)}(n,o,a,i)})}return a=a?a.then(i,i):i()}})}function E(t,e,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return{value:void 0,done:!0}}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=x(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function x(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var a=s(n,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,f;var o=a.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function k(t){if(t||""===t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}throw new TypeError(typeof t+" is not iterable")}return p.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:p,configurable:!0}),p.displayName=l(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,l(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),l(w.prototype,i,function(){return this}),t.AsyncIterator=w,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new w(u(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then(function(t){return t.done?t.value:i.next()})},b(g),l(g,c,"Generator"),l(g,o,function(){return this}),l(g,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;L(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}var Pt=function(){var t=Object(n.useState)(""),e=Object(f.a)(t,2),r=e[0],o=e[1],i=Object(n.useState)(""),c=Object(f.a)(i,2),u=c[0],s=c[1],h=Object(nt.p)(),m=localStorage.getItem("role");Object(n.useEffect)(function(){"admin"!==m&&h("/error")},[h,m]);var v=a.a.createRef(),y=(localStorage.getItem("jwtToken"),function(){var t=Object(l.a)(Ct().mark(function t(e){var n,a,o;return Ct().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.target.files[0]){t.next=3;break}return t.abrupt("return");case 3:return u||pt.a.fire({icon:"error",title:"Error!",text:"Please Add Collection Name."}),t.prev=4,t.next=7,$(n,r,u);case 7:a=t.sent,pt.a.fire({icon:"success",title:"Success!",text:a.message||"Data imported successfully."}),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(4),o=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:"Error importing data",pt.a.fire({icon:"error",title:"Oops...",text:o});case 15:case"end":return t.stop()}},t,null,[[4,11]])}));return function(e){return t.apply(this,arguments)}}()),g=function(){var t=Object(l.a)(Ct().mark(function t(){var e,n,a,o,i,c,l,u,s;return Ct().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=3;break}return pt.a.fire({icon:"warning",title:"Warning!",text:"Please provide a Database Name for exporting."}),t.abrupt("return");case 3:return t.prev=3,t.next=6,H(r);case 6:if((e=t.sent).data){t.next=9;break}throw new Error("No data received from server.");case 9:n=e.headers["content-disposition"],a="downloaded_file",n&&(o=n.match(/filename="([^"]+)"/))&&o[1]&&(a=o[1]),i=e.headers["content-type"]||"application/octet-stream",c=new Blob([e.data],{type:i}),l=window.URL.createObjectURL(c),(u=document.createElement("a")).href=l,u.setAttribute("download",a),document.body.appendChild(u),u.click(),document.body.removeChild(u),pt.a.fire({icon:"success",title:"Success!",text:"Data has been downloaded successfully."}),t.next=28;break;case 24:t.prev=24,t.t0=t.catch(3),s=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message||"Error exporting data",pt.a.fire({icon:"error",title:"Oops...",text:s});case 28:case"end":return t.stop()}},t,null,[[3,24]])}));return function(){return t.apply(this,arguments)}}();return a.a.createElement(p.a,{sx:{border:"1px solid #e0e0e0",borderRadius:2,padding:3,display:"flex",flexDirection:"column",gap:2,margin:"auto",marginTop:"5rem"}},a.a.createElement(k.a,{variant:"h6",align:"center"},"Data Management"),a.a.createElement(p.a,{sx:{display:"flex",flexDirection:"column",gap:2}},a.a.createElement(d.a,{label:"Database Name",variant:"outlined",value:r,onChange:function(t){return o(t.target.value)}}),a.a.createElement(d.a,{label:"Collection Name ",variant:"outlined",value:u,onChange:function(t){return s(t.target.value)}}),a.a.createElement("input",{type:"file",ref:v,style:{display:"none"},onChange:y}),a.a.createElement(b.a,{variant:"contained",color:"primary",onClick:function(){return v.current.click()},disabled:!u},"Import Data"),a.a.createElement(b.a,{variant:"contained",color:"secondary",onClick:g},"Dump Data")))},Tt=r(153),It=r.n(Tt),Ft=r(329),Gt=r(330),At=r(154),Bt=r(297),Dt=r(331),qt=r(43),Wt=r(155),Rt=r(308),Yt=r(152),zt=r.n(Yt);var Mt=function(){return a.a.createElement(lt.a,{style:{textAlign:"center",marginTop:"2rem"}},a.a.createElement(zt.a,{style:{fontSize:"4rem",color:"red"}}),a.a.createElement(k.a,{variant:"h4",gutterBottom:!0},"Access Denied"),a.a.createElement(k.a,{variant:"body1"},"You don't have permission to access this page."))};function Ut(){Ut=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(S){l=function(t,e,r){return t[e]=r}}function u(t,e,r,a){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),c=new O(a||[]);return n(i,"_invoke",{value:E(t,r,c)}),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(S){return{type:"throw",arg:S}}}t.wrap=u;var f={};function h(){}function p(){}function d(){}var m={};l(m,o,function(){return this});var v=Object.getPrototypeOf,y=v&&v(v(k([])));y&&y!==e&&r.call(y,o)&&(m=y);var g=d.prototype=h.prototype=Object.create(m);function b(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function w(t,e){var a;n(this,"_invoke",{value:function(n,o){function i(){return new e(function(a,i){!function n(a,o,i,c){var l=s(t[a],t,o);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then(function(t){n("next",t,i,c)},function(t){n("throw",t,i,c)}):e.resolve(f).then(function(t){u.value=t,i(u)},function(t){return n("throw",t,i,c)})}c(l.arg)}(n,o,a,i)})}return a=a?a.then(i,i):i()}})}function E(t,e,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return{value:void 0,done:!0}}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=x(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function x(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var a=s(n,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,f;var o=a.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function k(t){if(t||""===t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}throw new TypeError(typeof t+" is not iterable")}return p.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:p,configurable:!0}),p.displayName=l(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,l(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),l(w.prototype,i,function(){return this}),t.AsyncIterator=w,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new w(u(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then(function(t){return t.done?t.value:i.next()})},b(g),l(g,c,"Generator"),l(g,o,function(){return this}),l(g,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;L(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}var $t=Object(Wt.a)({palette:{primary:{main:"#131921"},secondary:{main:"#FFA41C"},background:{default:"#EAEBED"},text:{primary:"#333",secondary:"#555"}},typography:{fontFamily:["Arial","sans-serif"].join(",")}}),Ht=new E.QueryClient;var Qt=function(){var t=Object(nt.p)(),e=Object(nt.n)(),r="/login"===e.pathname||"/signup"===e.pathname,o=Object(n.useState)(!1),i=Object(f.a)(o,2),p=i[0],d=i[1],m=Object(n.useState)([]),v=Object(f.a)(m,2),y=v[0],x=v[1],j=Object(n.useState)([]),L=Object(f.a)(j,2),O=L[0],S=L[1],_=Object(n.useState)(""),N=Object(f.a)(_,2),P=N[0],T=(N[1],Object(n.useState)(!0)),I=Object(f.a)(T,2),F=(I[0],I[1]),G=Object(n.useState)(null),A=Object(f.a)(G,2),B=A[0],D=A[1],q=Object(n.useState)(!1),W=Object(f.a)(q,2),R=(W[0],W[1]),M=Object(n.useState)({title:"",author:"",price:"",description:""}),U=Object(f.a)(M,2),$=U[0],H=U[1];Boolean(B),Object(n.useEffect)(function(){localStorage.clear(),t("/login")},[]);var Q,J=function(){D(null)},X=localStorage.getItem("jwtToken");return Object(n.useEffect)(function(){function t(){return(t=Object(l.a)(Ut().mark(function t(){var e;return Ut().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(d(!0),!Object.values($).some(function(t){return!t})){t.next=14;break}return t.prev=2,t.next=5,Y("1","9",X);case 5:e=t.sent,x(e),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(2);case 11:return t.prev=11,d(!1),t.finish(11);case 14:case"end":return t.stop()}},t,null,[[2,9,11,14]])}))).apply(this,arguments)}!function(){t.apply(this,arguments)}()},[$,X]),a.a.createElement(rt.Provider,null,a.a.createElement(Rt.a,{theme:$t},a.a.createElement(E.QueryClientProvider,{client:Ht},a.a.createElement("div",{className:"app-background"},!r&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Ft.a,{position:"static",className:"app-bar"},a.a.createElement(Gt.a,null,a.a.createElement(k.a,{variant:"h5",className:"app-title"},"Bookstore"),a.a.createElement(b.a,{color:"inherit",component:qt.b,to:"/",className:"app-home-btn"},"Home"),a.a.createElement("div",{style:{flexGrow:1}}),"/admin"!==e.pathname&&a.a.createElement(xt.a,{color:"inherit",component:qt.b,to:"/cart",className:"cart-icon-btn"},a.a.createElement(Nt.a,{badgeContent:O.reduce(function(t,e){return t+e.quantity},0),color:"error"},a.a.createElement(C.a,null))),a.a.createElement(k.a,{variant:"subtitle1",className:"user-name",style:{marginLeft:"24px"}},"Hi ".concat((Q=localStorage.getItem("username")||"").charAt(0).toUpperCase()+Q.slice(1))),a.a.createElement(xt.a,{edge:"end",color:"inherit",onClick:function(t){D(t.currentTarget)}},a.a.createElement(tt.a,null,a.a.createElement(It.a,null))),a.a.createElement(At.a,{anchorEl:B,open:Boolean(B),onClose:J,TransitionComponent:Bt.a},a.a.createElement(g.a,{onClick:function(){localStorage.removeItem("jwtToken"),F(!1),J(),t("/login")}},"Logout")))),"/admin"!==e.pathname&&"/checkout"!==e.pathname&&"/cart"!==e.pathname&&a.a.createElement(h.a,{className:"search-bar-paper"},a.a.createElement(w,{filters:$,onFilterChange:function(t,e){H(function(r){return Object(s.a)({},r,Object(u.a)({},t,e))})},onSearch:function(){R(!0),z($).then(function(t){x(t.data)}).catch(function(t){console.error("Error fetching filtered books:",t)})}}))),a.a.createElement(lt.a,{maxWidth:"lg",className:"container"},a.a.createElement(nt.e,null,a.a.createElement(nt.c,{path:"/error",element:a.a.createElement(Mt,null)}),a.a.createElement(nt.c,{path:"/",element:a.a.createElement(V,{onAddToCart:function(t){S(function(e){return e.find(function(e){return e._id===t._id})?e.map(function(e){return e._id===t._id?Object(s.a)({},e,{quantity:e.quantity+1,total:(e.quantity+1)*e.price}):e}):[].concat(Object(c.a)(e),[Object(s.a)({},t,{quantity:1,total:t.price})])})},searchTerm:P,books:y})}),a.a.createElement(nt.c,{path:"/admin",element:a.a.createElement(Pt,{onImport:function(){console.log("Importing data...")},onExport:function(){console.log("Exporting data...")}})}),a.a.createElement(nt.c,{path:"/cart",element:a.a.createElement(ct,{cartItems:O,onRemoveFromCart:function(t){S(function(e){var r=e.find(function(e){return e._id===t._id});return r&&r.quantity>1?e.map(function(e){return e._id===t._id?Object(s.a)({},e,{quantity:e.quantity-1}):e}):e.filter(function(e){return e._id!==t._id})})}})}),a.a.createElement(nt.c,{path:"/checkout",element:a.a.createElement(_t,{cartItems:O,setCartItems:S})}),a.a.createElement(nt.c,{path:"/login",element:a.a.createElement(st,null)}),a.a.createElement(nt.c,{path:"/signup",element:a.a.createElement(yt,null)}),a.a.createElement(nt.c,{path:"*",element:a.a.createElement(nt.a,{to:"/error",replace:!0})}))),p&&a.a.createElement("div",{className:"loader-container"},a.a.createElement(Dt.a,null))))))},Vt=function(t){t&&t instanceof Function&&r.e(5).then(r.bind(null,505)).then(function(e){var r=e.getCLS,n=e.getFID,a=e.getFCP,o=e.getLCP,i=e.getTTFB;r(t),n(t),a(t),o(t),i(t)})};i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(qt.a,null,a.a.createElement(Qt,null))),document.getElementById("root")),Vt()}},[[176,1,2]]]);
//# sourceMappingURL=main.7f4ec26a.chunk.js.map